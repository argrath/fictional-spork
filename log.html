<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" id="sixapart-standard">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<link rel="stylesheet" href="st.css" type="text/css" />
<link rel="start" href="https://argrath.ub32.org/annex/" title="Home" />
<link rel="alternate" type="application/atom+xml" title="Recent Entries" href="https://argrath.ub32.org/annex/atom.xml" />
    <link rel="prev bookmark" href="https://argrath.ub32.org/annex/2015/01/03-21.html" title="GeForce GTX 750 Ti KalmXを買った" />
    <link rel="next bookmark" href="https://argrath.ub32.org/annex/2015/03/28-18.html" title="Ingress のイベント「証人」に参加してみた" />
    <title>Windowsでお手軽にCasperJSを試す - 王様の耳は驢馬の耳(別館)</title>
</head>
<body id="mt-blog" class="mt-entry-archive layout-wt">
    <div id="container">
        <div id="container-inner">
            <div id="header">
    <div id="header-inner">
        <div id="header-content">
            <div id="header-name"><a href="https://argrath.ub32.org/annex/" accesskey="1">王様の耳は驢馬の耳(別館)</a></div>
            <div id="header-description"></div>
        </div>
    </div>
</div>
            <div id="content">
                <div id="content-inner">
                    <div id="alpha">
                        <div id="alpha-inner">
                            <div id="entry-59" class="entry-asset asset hentry">
                                <div class="asset-header">
                                    <h1 id="page-title" class="asset-name entry-title">Windowsでお手軽にCasperJSを試す</h1>
                                    <div class="asset-meta">
                                        <span class="byline">
                                            By <span class="vcard author">argrath</span> on <abbr class="published" title="2016-02-26T20:00:00+0900">2016-02-26 20:00:00</abbr>
                                        </span>
                                        <span class="separator">|</span> <div class="entry-tags"></div>
                                    </div>
                                </div>
                                <div class="asset-content entry-content">
                                    <div class="asset-body">
<p>CasperJSも動作に必要なPhantomJSもWindows版が配布されてるから簡単、と思いきやちょっとハマったのでメモ。試したのはWindows7 64bit。</p>

                                    </div>
                                    <div id="more" class="asset-more">
<h2>ダウンロード</h2>

<h3 id="phantomjs">PhantomJS</h3>

<p><a href="http://phantomjs.org/download.html">ダウンロードページ</a>からWindows版をダウンロード。これ書いている時点ではphantomjs-2.1.1-windows.zip。まあこちらは問題ない。</p>

<h3 id="casperjs">CasperJS</h3>

<p>ここで<a href="http://docs.casperjs.org/en/latest/installation.html#casperjs-on-windows">CasperJS on Windows</a>
からWindows版をダウンロードすると後で色々困ることになる。</p>

<p>正解は<strong><a href="http://docs.casperjs.org/en/latest/installation.html#installing-from-an-archive">Installing from an archive</a>のn1k0-casperjs-1.1-beta5-16-gd75c7b3.zipをダウンロード</strong>する。ちゃんとこちらにもWindows版のファイルも入っている。</p>

<h2>展開</h2>

<p>PhantomJSとCasperJSをそれぞれ適当なフォルダに展開する。まあここは問題ない。</p>

<p>次に、PhantomJSのbin/PhantomJS.exeをCasperJSのbinフォルダににコピーする。これで面倒なPATHの設定をスキップする。</p>

<h2>実行</h2>

<p>まずはCasperJSのbinフォルダでコマンドプロンプトを起動して:</p>

<pre><code>casperjs
</code></pre>

<p>と実行してみてエラーが出ていなければ成功。ドキュメントとかサンプルとか適当に見てスクリプト書いて:</p>

<pre><code>casperjs sample.js
</code></pre>

<p>と実行すれば動作する。</p>

<p>なお、標準出力に全角文字系を出力したいなら</p>

<pre><code>casperjs sample.js --output-encoding=shift-jis
</code></pre>

<p>としないといけない。これを指定しないと<strong>微妙に壊れたUTF-8っぽいもの</strong>で出力されるので、リダイレクトしてUTF-8が読めるエディタで開いても壊れたままになる。ShiftJISで扱えない文字を出力したいなら自力でファイル出力を書かないといけない。</p>

                                    </div>
                                </div>
                                <div class="asset-footer">
                                    <div class="entry-tags">
                                        <h4>Tags<span class="delimiter">:</span></h4>
                                        <ul>
                                            <li><a href="javascript:void(0)" onclick="location.href='https://argrath.ub32.org/cgi-bin/movabletype/mt-search.cgi?IncludeBlogs=1&amp;tag=TheHobbit&amp;limit=20';return false;" rel="tag">TheHobbit</a></li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
</div>
</div>
    </div>
</div>
                </div>
            </div>
        </div>
    </div>
</body>
</html>
